[gd_scene load_steps=11 format=2]

[ext_resource path="res://scenes/tracks/FellOffTrack.gd" type="Script" id=1]
[ext_resource path="res://scripts/Game.gd" type="Script" id=2]
[ext_resource path="res://scripts/TrackTransformer.gd" type="Script" id=3]
[ext_resource path="res://scripts/PathGenerator.gd" type="Script" id=4]
[ext_resource path="res://scenes/utility/SplitScreen.tscn" type="PackedScene" id=5]
[ext_resource path="res://scenes/utility/FadeIn.tscn" type="PackedScene" id=6]
[ext_resource path="res://scenes/utility/Loading.tscn" type="PackedScene" id=7]

[sub_resource type="ProceduralSky" id=1]

[sub_resource type="Environment" id=2]
background_mode = 2
background_sky = SubResource( 1 )

[sub_resource type="BoxShape" id=4]
extents = Vector3( 2.45845, 1, 2.59544 )

[node name="Game" type="Spatial"]
script = ExtResource( 2 )

[node name="WorldEnvironment" type="WorldEnvironment" parent="."]
environment = SubResource( 2 )

[node name="SplitScreen" parent="WorldEnvironment" instance=ExtResource( 5 )]

[node name="FellOffTrack" type="Area" parent="WorldEnvironment"]
transform = Transform( 3.05416, 0, 0, 0, 1, 0, 0, 0, 2.99234, 0, -15.7204, 0 )
script = ExtResource( 1 )

[node name="CollisionShape" type="CollisionShape" parent="WorldEnvironment/FellOffTrack"]
transform = Transform( 33.9752, 0, 0, 0, 1, 0, 0, 0, 36.3935, 0, 0, 0 )
shape = SubResource( 4 )

[node name="TopCamera" type="CanvasLayer" parent="WorldEnvironment"]

[node name="ViewportContainer" type="ViewportContainer" parent="WorldEnvironment/TopCamera"]
anchor_right = 1.0
anchor_bottom = 1.0
__meta__ = {
"_edit_use_anchors_": false
}

[node name="Viewport" type="Viewport" parent="WorldEnvironment/TopCamera/ViewportContainer"]
size = Vector2( 1920, 1080 )
handle_input_locally = false
msaa = 2
render_target_update_mode = 3

[node name="OverlookingCamera" type="Camera" parent="WorldEnvironment/TopCamera/ViewportContainer/Viewport"]

[node name="Loading" parent="WorldEnvironment/TopCamera" instance=ExtResource( 7 )]
visible = false

[node name="TrackTransformer" type="Node" parent="."]
script = ExtResource( 3 )

[node name="PathGenerator" type="Node" parent="."]
script = ExtResource( 4 )

[node name="FadeIn" parent="." instance=ExtResource( 6 )]

[connection signal="body_entered" from="WorldEnvironment/FellOffTrack" to="WorldEnvironment/FellOffTrack" method="_on_FellOffTrack_body_entered"]
[connection signal="fade_finished" from="FadeIn" to="." method="_on_FadeIn_fade_finished"]
